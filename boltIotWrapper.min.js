!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).boltApi={})}(this,function(e){"use strict";var h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}function r(e){return e&&e.Math==Math&&e}function n(e){try{return!!e()}catch(t){return!0}}function i(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function o(e){return j.call(e).slice(8,-1)}function w(e){if(e==undefined)throw TypeError("Can't call method on "+e);return e}function u(e){return E(w(e))}function s(e){return"object"==typeof e?null!==e:"function"==typeof e}function a(e,t){if(!s(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!s(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!s(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!s(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}function c(e,t){return L.call(e,t)}function f(e){return R?S.createElement(e):{}}function l(e){if(!s(e))throw TypeError(String(e)+" is not an object");return e}function p(e,t){try{C(_,e,t)}catch(r){_[e]=t}return t}function d(e){return"Symbol("+String(e===undefined?"":e)+")_"+(++H+q).toString(36)}function y(e){return G[e]||(G[e]=d(e))}var v,b,m,g="object",_=r(typeof globalThis==g&&globalThis)||r(typeof window==g&&window)||r(typeof self==g&&self)||r(typeof h==g&&h)||Function("return this")(),T=!n(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),A={}.propertyIsEnumerable,P=Object.getOwnPropertyDescriptor,O={f:P&&!A.call({1:2},1)?function(e){var t=P(this,e);return!!t&&t.enumerable}:A},j={}.toString,D="".split,E=n(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==o(e)?D.call(e,""):Object(e)}:Object,L={}.hasOwnProperty,S=_.document,R=s(S)&&s(S.createElement),x=!T&&!n(function(){return 7!=Object.defineProperty(f("div"),"a",{get:function(){return 7}}).a}),B=Object.getOwnPropertyDescriptor,I={f:T?B:function P(e,t){if(e=u(e),t=a(t,!0),x)try{return B(e,t)}catch(r){}if(c(e,t))return i(!O.f.call(e,t),e[t])}},U=Object.defineProperty,F={f:T?U:function(e,t,r){if(l(e),t=a(t,!0),l(r),x)try{return U(e,t,r)}catch(n){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},C=T?function(e,t,r){return F.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e},W=t(function(e){var t="__core-js_shared__",r=_[t]||p(t,{});(e.exports=function(e,t){return r[e]||(r[e]=t!==undefined?t:{})})("versions",[]).push({version:"3.1.3",mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),k=W("native-function-to-string",Function.toString),N=_.WeakMap,M="function"==typeof N&&/native code/.test(k.call(N)),H=0,q=Math.random(),G=W("keys"),z={},V=_.WeakMap;if(M){var K=new V,X=K.get,Y=K.has,J=K.set;v=function(e,t){return J.call(K,e,t),t},b=function(e){return X.call(K,e)||{}},m=function(e){return Y.call(K,e)}}else{var $=y("state");z[$]=!0,v=function(e,t){return C(e,$,t),t},b=function(e){return c(e,$)?e[$]:{}},m=function(e){return c(e,$)}}function Q(e){return"function"==typeof e?e:undefined}function Z(e,t){return arguments.length<2?Q(pe[e])||Q(_[e]):pe[e]&&pe[e][t]||_[e]&&_[e][t]}function ee(e){return isNaN(e=+e)?0:(0<e?ye:de)(e)}function te(e){return 0<e?ve(ee(e),9007199254740991):0}function re(a){return function(e,t,r){var n,i=u(e),o=te(i.length),s=function(e,t){var r=ee(e);return r<0?be(r+t,0):me(r,t)}(r,o);if(a&&t!=t){for(;s<o;)if((n=i[s++])!=n)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===t)return a||s||0;return!a&&-1}}function ne(e,t){var r,n=u(e),i=0,o=[];for(r in n)!c(z,r)&&c(n,r)&&o.push(r);for(;t.length>i;)c(n,r=t[i++])&&(~ge(o,r)||o.push(r));return o}function ie(e,t){for(var r=Pe(t),n=F.f,i=I.f,o=0;o<r.length;o++){var s=r[o];c(e,s)||n(e,s,i(t,s))}}function oe(e,t){var r=De[je(e)];return r==Le||r!=Ee&&("function"==typeof t?n(t):!!t)}function se(n,i,e){if(function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function")}(n),i===undefined)return n;switch(e){case 0:return function(){return n.call(i)};case 1:return function(e){return n.call(i,e)};case 2:return function(e,t){return n.call(i,e,t)};case 3:return function(e,t,r){return n.call(i,e,t,r)}}return function(){return n.apply(i,arguments)}}function ae(e){return Ue[e]||(Ue[e]=Be&&Ie[e]||(Be?Ie:d)("Symbol."+e))}function ue(e,t){var r;return xe(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!xe(r.prototype)?s(r)&&null===(r=r[Fe])&&(r=undefined):r=undefined),new(r===undefined?Array:r)(0===t?0:t)}function ce(p){var d=1==p,y=2==p,v=3==p,b=4==p,m=6==p,g=5==p||m;return function(e,t,r,n){for(var i,o,s=function(e){return Object(w(e))}(e),a=E(s),u=se(t,r,3),c=te(a.length),f=0,l=n||ue,h=d?l(e,c):y?l(e,0):undefined;f<c;f++)if((g||f in a)&&(o=u(i=a[f],f,s),p))if(d)h[f]=o;else if(o)switch(p){case 3:return!0;case 5:return i;case 6:return f;case 2:Ce.call(h,i)}else if(b)return!1;return m?-1:v||b?b:h}}function fe(){}var le={set:v,get:b,has:m,enforce:function(e){return m(e)?b(e):v(e,{})},getterFor:function(r){return function(e){var t;if(!s(e)||(t=b(e)).type!==r)throw TypeError("Incompatible receiver, "+r+" required");return t}}},he=t(function(e){var t=le.get,a=le.enforce,u=String(k).split("toString");W("inspectSource",function(e){return k.call(e)}),(e.exports=function(e,t,r,n){var i=!!n&&!!n.unsafe,o=!!n&&!!n.enumerable,s=!!n&&!!n.noTargetGet;"function"==typeof r&&("string"!=typeof t||c(r,"name")||C(r,"name",t),a(r).source=u.join("string"==typeof t?t:"")),e!==_?(i?!s&&e[t]&&(o=!0):delete e[t],o?e[t]=r:C(e,t,r)):o?e[t]=r:p(t,r)})(Function.prototype,"toString",function(){return"function"==typeof this&&t(this).source||k.call(this)})}),pe=_,de=Math.ceil,ye=Math.floor,ve=Math.min,be=Math.max,me=Math.min,ge={includes:re(!0),indexOf:re(!1)}.indexOf,we=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],_e=we.concat("length","prototype"),Te={f:Object.getOwnPropertyNames||function(e){return ne(e,_e)}},Ae={f:Object.getOwnPropertySymbols},Pe=Z("Reflect","ownKeys")||function Pe(e){var t=Te.f(l(e)),r=Ae.f;return r?t.concat(r(e)):t},Oe=/#|\.prototype\./,je=oe.normalize=function(e){return String(e).replace(Oe,".").toLowerCase()},De=oe.data={},Ee=oe.NATIVE="N",Le=oe.POLYFILL="P",Se=oe,Re=I.f,xe=Array.isArray||function xe(e){return"Array"==o(e)},Be=!!Object.getOwnPropertySymbols&&!n(function(){return!String(Symbol())}),Ie=_.Symbol,Ue=W("wks"),Fe=ae("species"),Ce=[].push,We={forEach:ce(0),map:ce(1),filter:ce(2),some:ce(3),every:ce(4),find:ce(5),findIndex:ce(6)},ke=Object.keys||function G(e){return ne(e,we)},Ne=T?Object.defineProperties:function(e,t){l(e);for(var r,n=ke(t),i=n.length,o=0;o<i;)F.f(e,r=n[o++],t[r]);return e},Me=Z("document","documentElement"),He=y("IE_PROTO"),qe="prototype",Ge=function(){var e,t=f("iframe"),r=we.length,n="script";for(t.style.display="none",Me.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object</"+n+">"),e.close(),Ge=e.F;r--;)delete Ge[qe][we[r]];return Ge()},ze=Object.create||function(e,t){var r;return null!==e?(fe[qe]=l(e),r=new fe,fe[qe]=null,r[He]=e):r=Ge(),t===undefined?r:Ne(r,t)};z[He]=!0;var Ve=ae("unscopables"),Ke=Array.prototype;Ke[Ve]==undefined&&C(Ke,Ve,ze(null));var Xe,Ye=We.find,Je="find",$e=!0;Je in[]&&Array(1)[Je](function(){$e=!1}),function(e,t){var r,n,i,o,s,a=e.target,u=e.global,c=e.stat;if(r=u?_:c?_[a]||p(a,{}):(_[a]||{}).prototype)for(n in t){if(o=t[n],i=e.noTargetGet?(s=Re(r,n))&&s.value:r[n],!Se(u?n:a+(c?".":"#")+n,e.forced)&&i!==undefined){if(typeof o==typeof i)continue;ie(o,i)}(e.sham||i&&i.sham)&&C(o,"sham",!0),he(r,n,o,e)}}({target:"Array",proto:!0,forced:$e},{find:function(e){return Ye(this,e,1<arguments.length?arguments[1]:undefined)}}),Xe=Je,Ke[Ve][Xe]=!0;var Qe,Ze,et=Function.call;Qe="find",se(et,_["Array"].prototype[Qe],Ze),t(function(e,t){!function(){function e(t){var r=this.constructor;return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){return r.reject(e)})})}var t=setTimeout;function c(e){return Boolean(e&&"undefined"!=typeof e.length)}function n(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],l(e,this)}function i(n,i){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,o._immediateFn(function(){var e=1===n._state?i.onFulfilled:i.onRejected;if(null!==e){var t;try{t=e(n._value)}catch(r){return void a(i.promise,r)}s(i.promise,t)}else(1===n._state?s:a)(i.promise,n._value)})):n._deferreds.push(i)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if(t instanceof o)return e._state=3,e._value=t,void u(e);if("function"==typeof r)return void l(function n(e,t){return function(){e.apply(t,arguments)}}(r,t),e)}e._state=1,e._value=t,u(e)}catch(i){a(e,i)}}function a(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)i(e,e._deferreds[t]);e._deferreds=null}function f(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function l(e,t){var r=!1;try{e(function(e){r||(r=!0,s(t,e))},function(e){r||(r=!0,a(t,e))})}catch(n){if(r)return;r=!0,a(t,n)}}o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var r=new this.constructor(n);return i(this,new f(e,t,r)),r},o.prototype["finally"]=e,o.all=function(t){return new o(function(i,o){if(!c(t))return o(new TypeError("Promise.all accepts an array"));var s=Array.prototype.slice.call(t);if(0===s.length)return i([]);var a=s.length;function u(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return void r.call(e,function(e){u(t,e)},o)}s[t]=e,0==--a&&i(s)}catch(n){o(n)}}for(var e=0;e<s.length;e++)u(e,s[e])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(r){return new o(function(e,t){t(r)})},o.race=function(i){return new o(function(e,t){if(!c(i))return t(new TypeError("Promise.race accepts an array"));for(var r=0,n=i.length;r<n;r++)o.resolve(i[r]).then(e,t)})},o._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){t(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==h)return h;throw new Error("unable to locate global object")}();"Promise"in r?r.Promise.prototype["finally"]||(r.Promise.prototype["finally"]=e):r.Promise=o}()});!function(e){if(!e.fetch){var t="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,s="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),n="FormData"in e,i="ArrayBuffer"in e;if(i)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(e){return e&&DataView.prototype.isPrototypeOf(e)},u=ArrayBuffer.isView||function(e){return e&&-1<o.indexOf(Object.prototype.toString.call(e))};d.prototype.append=function(e,t){e=l(e),t=h(t);var r=this.map[e];this.map[e]=r?r+","+t:t},d.prototype["delete"]=function(e){delete this.map[l(e)]},d.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},d.prototype.set=function(e,t){this.map[l(e)]=h(t)},d.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},d.prototype.keys=function(){var r=[];return this.forEach(function(e,t){r.push(t)}),p(r)},d.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),p(t)},d.prototype.entries=function(){var r=[];return this.forEach(function(e,t){r.push([t,e])}),p(r)},r&&(d.prototype[Symbol.iterator]=d.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},g.call(w.prototype),g.call(T.prototype),T.prototype.clone=function(){return new T(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},T.error=function(){var e=new T(null,{status:0,statusText:""});return e.type="error",e};var f=[301,302,303,307,308];T.redirect=function(e,t){if(-1===f.indexOf(t))throw new RangeError("Invalid status code");return new T(null,{status:t,headers:{location:e}})},e.Headers=d,e.Request=w,e.Response=T,e.fetch=function(r,o){return new Promise(function(n,e){var t=new w(r,o),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:function r(e){var i=new d;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var t=e.split(":"),r=t.shift().trim();if(r){var n=t.join(":").trim();i.append(r,n)}}),i}(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;n(new T(t,e))},i.onerror=function(){e(new TypeError("Network request failed"))},i.ontimeout=function(){e(new TypeError("Network request failed"))},i.open(t.method,t.url,!0),"include"===t.credentials?i.withCredentials=!0:"omit"===t.credentials&&(i.withCredentials=!1),"responseType"in i&&s&&(i.responseType="blob"),t.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"==typeof t._bodyInit?null:t._bodyInit)})},e.fetch.polyfill=!0}function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function h(e){return"string"!=typeof e&&(e=String(e)),e}function p(t){var e={next:function(){var e=t.shift();return{done:e===undefined,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function y(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function v(r){return new Promise(function(e,t){r.onload=function(){e(r.result)},r.onerror=function(){t(r.error)}})}function b(e){var t=new FileReader,r=v(t);return t.readAsArrayBuffer(e),r}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(s&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(n&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(i&&s&&a(e))this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(e)&&!u(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=y(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(b)}),this.text=function(){var e=y(this);if(e)return e;if(this._bodyBlob)return function n(e){var t=new FileReader,r=v(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function i(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}function w(e,t){var r=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=function n(e){var t=e.toUpperCase();return-1<c.indexOf(t)?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function _(e){var i=new FormData;return e.trim().split("&").forEach(function(e){if(e){var t=e.split("="),r=t.shift().replace(/\+/g," "),n=t.join("=").replace(/\+/g," ");i.append(decodeURIComponent(r),decodeURIComponent(n))}}),i}function T(e,t){t=t||{},this.type="default",this.status=t.status===undefined?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:undefined);var tt=function(e,t){return(tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function rt(e,t){function r(){this.constructor=e}tt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function nt(t,s,a,u){return new(a=a||Promise)(function(e,r){function n(e){try{o(u.next(e))}catch(t){r(t)}}function i(e){try{o(u["throw"](e))}catch(t){r(t)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,i)}o((u=u.apply(t,s||[])).next())})}function it(n,i){var o,s,a,e,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),"throw":t(1),"return":t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function r(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,s&&(a=2&e[0]?s["return"]:e[0]?s["throw"]||((a=s["return"])&&a.call(s),0):s.next)&&!(a=a.call(s,e[1])).done)return a;switch(s=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,s=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){u.label=e[1];break}if(6===e[0]&&u.label<a[1]){u.label=a[1],a=e;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(e);break}a[2]&&u.ops.pop(),u.trys.pop();continue}e=i.call(n,u)}catch(t){e=[6,t],s=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([t,e])}}}function ot(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)s.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s}var st,at,ut,ct,ft,lt,ht,pt,dt,yt,vt,bt,mt,gt,wt,_t,Tt,At,Pt=t(function(e,t){var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r)return r;throw new Error("unable to locate global object")}();e.exports=t=r.fetch,t["default"]=r.fetch.bind(r),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response});Pt.Headers,Pt.Request,Pt.Response;(at=st=st||{})[at.zero=0]="zero",at[at.one=1]="one",at[at.two=2]="two",at[at.three=3]="three",at[at.four=4]="four",at.A0="A0",(ct=ut=ut||{}).high="HIGH",ct.low="LOW",(lt=ft=ft||{})[lt.defaultLoopTime=3100]="defaultLoopTime",lt[lt.defaultApiDiff=3e3]="defaultApiDiff",lt.baseUrl="https://cloud.boltiot.com/remote",(pt=ht=ht||{}).online="online",pt.offline="offline",(yt=dt=dt||{})[yt.api=0]="api",yt[yt.message=1]="message",(bt=vt=vt||{})[bt.info=0]="info",bt[bt.warn=1]="warn",bt[bt.error=2]="error",(gt=mt=mt||{})[gt.start=0]="start",gt[gt.inProgress=1]="inProgress",gt[gt.completed=2]="completed",(_t=wt=wt||{}).digitalMultiRead="digitalMultiRead",_t.digitalRead="digitalRead",_t.digitalMultiWrtie="digitalMultiWrite",_t.digitalWrite="digitalWrite",_t.analogRead="analogRead",_t.analogWrite="analogWrite",_t.serialBegin="serialBegin",_t.serialWrite="serialWrite",_t.serialRead="serialRead",_t.serialWR="serialWR",_t.isOnline="isOnline",_t.restart="restart",_t.version="version",(At=Tt=Tt||{}).fail="fail",At.success="success";var Ot=Object.freeze({get PINS(){return st},get STATE(){return ut},get CONSTANTS(){return ft},get STATUS(){return ht},get EVENT(){return dt},get LOG_TYPE(){return vt},get API_PHASE(){return mt},get BOLT_FUNC(){return wt},get API_STATUS(){return Tt}}),jt=(Dt.prototype.setTimeoutAsync=function(r){return new Promise(function(e,t){setTimeout(function(){e()},r)})},Object.defineProperty(Dt.prototype,"EventListeners",{get:function(){return Dt.eventListeners},enumerable:!0,configurable:!0}),Object.defineProperty(Dt.prototype,"Devices",{get:function(){return Dt.devices},enumerable:!0,configurable:!0}),Object.defineProperty(Dt.prototype,"IsNode",{get:function(){return"undefined"!=typeof process&&process.release&&"node"===process.release.name},enumerable:!0,configurable:!0}),Dt.prototype.log=function(e,t){switch(e){case vt.info:console.info("Bolt-IOT-Wrapper--- "+t);break;case vt.warn:console.warn("Bolt-IOT-Wrapper--- "+t);break;case vt.error:console.error("Bolt-IOT-Wrapper--- "+t)}},Dt.devices=[],Dt.eventListeners=[],Dt);function Dt(){}var Et,Lt=(rt(St,Et=jt),St.prototype.subscribe=function(t,r){var n=this,i=this.EventListeners.find(function(e){return e.event===t});return i?i.cb.push(r):(i={cb:[r],event:t},this.EventListeners.push(i)),function(){if(i){var e=i.cb.findIndex(function(e){return e===r});i.cb.splice(e,1)}else{var t="Invalid event";n.run(dt.message,vt.error,t),n.log(vt.error,t)}}},St.prototype.run=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var r=this.EventListeners.find(function(e){return e.event===t});r&&r.cb.forEach(function(e){try{e.apply(void 0,function r(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ot(arguments[t]));return e}(n))}finally{}})},St);function St(){return null!==Et&&Et.apply(this,arguments)||this}var Rt,xt=(rt(Bt,Rt=jt),Bt.prototype.getData=function(s,a){return nt(this,void 0,Promise,function(){var t,r,n,i,o;return it(this,function(e){switch(e.label){case 0:return e.trys.push([0,6,7,8]),r=void 0,this.showLoader&&this.eventListeners.run(dt.api,mt.start,s),r=a?ft.baseUrl+"/"+this.currentDevice.key+"/"+s+"?\n        deviceName="+this.currentDevice.name+"&"+a:ft.baseUrl+"/"+this.currentDevice.key+"/"+s+"?\n        deviceName="+this.currentDevice.name,n=Date.now(),Bt.lastApiCallTimeStamp&&n-Bt.lastApiCallTimeStamp<ft.defaultApiDiff?[4,this.setTimeoutAsync(n-Bt.lastApiCallTimeStamp)]:[3,3];case 1:return e.sent(),[4,this.getData(s,a)];case 2:return[2,e.sent()];case 3:return Bt.lastApiCallTimeStamp=n,this.showLoader&&this.eventListeners.run(dt.api,mt.inProgress,s),[4,this.fetch(r.replace(/ /g,""),{headers:{"Cache-Control":"no-cache"}})];case 4:return[4,e.sent().json()];case 5:return"1"===(i=e.sent()).success.toString()?[2,i]:(t="Bolt cloud responded with failure: "+i.value,this.eventListeners.run(dt.message,vt.error,t),this.log(vt.error,t),[2,Promise.reject(t)]);case 6:return o=e.sent(),this.eventListeners.run(dt.message,vt.error,o.message),this.log(vt.error,o.message),[2,Promise.reject(o.message)];case 7:return this.showLoader&&this.eventListeners.run(dt.api,mt.completed,s),[7];case 8:return[2]}})})},Bt);function Bt(e,t){void 0===t&&(t=!0);var r=Rt.call(this)||this;return r.currentDevice=e,r.showLoader=t,r.fetch=null,r.eventListeners=new Lt,r.IsNode?r.fetch=Pt:r.fetch=window.fetch.bind(window),r}var It,Ut=(rt(Ft,It=jt),Object.defineProperty(Ft.prototype,"CurrentDevice",{get:function(){if(this.currentDevice)return this.currentDevice;var e="Cloud responded with failure";throw this.eventListeners.run(dt.message,vt.error,e),this.log(vt.error,e),new Error("msg")},set:function(e){this.currentDevice=e},enumerable:!0,configurable:!0}),Ft);function Ft(t){var e=It.call(this)||this;e.eventListeners=new Lt,e.currentDevice=null;var r=e.Devices.find(function(e){return e.name===t});return t&&r&&(e.currentDevice=r),e}var Ct,Wt=(rt(kt,Ct=Ut),kt.prototype.loopRead=function(n,i){return nt(this,void 0,void 0,function(){var t,r;return it(this,function(e){switch(e.label){case 0:if(n<ft.defaultLoopTime)return t="Time cannot be less than "+ft.defaultLoopTime+" ms",this.eventListeners.run(dt.message,vt.error,t),this.log(vt.error,t),[2];e.label=1;case 1:e.label=2;case 2:return e.trys.push([2,5,6,7]),[4,this.setTimeoutAsync(n)];case 3:return e.sent(),[4,this.read()];case 4:return r=e.sent(),i(Tt.success,r)?[3,7]:[3,8];case 5:return e.sent(),i(Tt.fail,{})?[3,7]:[3,8];case 6:return[7];case 7:return[3,1];case 8:return[2]}})})},kt.prototype.read=function(){return nt(this,void 0,Promise,function(){var t;return it(this,function(e){switch(e.label){case 0:return[4,this.api.getData(wt.analogRead,"pin=A0")];case 1:return t=e.sent(),[2,parseInt(t.value,10)]}})})},kt.prototype.pwm=function(n){return nt(this,void 0,void 0,function(){var t,r;return it(this,function(e){switch(e.label){case 0:return n instanceof Array?(t=[],r=[],n.forEach(function(e){t.push(e.pin),r.push(e.value)}),[4,this.api.getData(wt.analogWrite,"pin="+t.join(",")+"&value="+r.join(","))]):[3,2];case 1:return[2,e.sent()];case 2:return[4,this.api.getData(wt.analogWrite,"pin="+n.pin+"&value="+n.value)];case 3:return[2,e.sent()]}})})},kt);function kt(e,t){var r=Ct.call(this,e)||this;return r.showLoader=t,r.api=new xt(r.CurrentDevice,r.showLoader),r}var Nt,Mt=(rt(Ht,Nt=Ut),Ht.prototype.loopRead=function(n,i,o){return nt(this,void 0,void 0,function(){var t,r;return it(this,function(e){switch(e.label){case 0:if(i<ft.defaultLoopTime)return t="Time cannot be less than "+ft.defaultLoopTime+" ms",this.eventListeners.run(dt.message,vt.error,t),this.log(vt.error,t),[2];e.label=1;case 1:e.label=2;case 2:return e.trys.push([2,5,6,7]),[4,this.setTimeoutAsync(i)];case 3:return e.sent(),[4,this.read(n)];case 4:return r=e.sent(),o(Tt.success,r)?[3,7]:[3,8];case 5:return e.sent(),o(Tt.fail,{})?[3,7]:[3,8];case 6:return[7];case 7:return[3,1];case 8:return[2]}})})},Ht.prototype.read=function(o){return nt(this,void 0,Promise,function(){var t,r,n,i;return it(this,function(e){switch(e.label){case 0:return o instanceof Array?(t=o.join(","),[4,this.api.getData(wt.digitalMultiRead,"pins="+t)]):[3,2];case 1:return r=e.sent(),n=r.value.split(","),i=[],n.forEach(function(e,t){i.push({pin:o[t],state:"1"===e?ut.high:ut.low})}),[2,i];case 2:return t=o.toString(),[4,this.api.getData(wt.digitalRead,"pin="+t)];case 3:return r=e.sent(),[2,{pin:o,state:"1"===r.value?ut.high:ut.low}]}})})},Ht.prototype.write=function(n){return nt(this,void 0,void 0,function(){var t,r;return it(this,function(e){switch(e.label){case 0:return n instanceof Array?(t=[],r=[],n.forEach(function(e){t.push(e.pin),r.push(e.state)}),[4,this.api.getData(wt.digitalMultiWrtie,"pins="+t.join(",")+"&states="+r.join(","))]):[3,2];case 1:return[2,e.sent()];case 2:return[4,this.api.getData(wt.digitalWrite,"pin="+n.pin+"&state="+n.state)];case 3:return[2,e.sent()]}})})},Ht);function Ht(e,t){var r=Nt.call(this,e)||this;return r.showLoader=t,r.api=new xt(r.CurrentDevice,r.showLoader),r}var qt,Gt=(rt(zt,qt=Ut),zt.prototype.begin=function(t){return nt(this,void 0,Promise,function(){return it(this,function(e){switch(e.label){case 0:return[4,this.api.getData(wt.serialBegin,"baud="+t)];case 1:return[2,"serialBegin successful"===e.sent().value]}})})},zt.prototype.write=function(t){return nt(this,void 0,Promise,function(){return it(this,function(e){switch(e.label){case 0:return[4,this.api.getData(wt.serialWrite,"data="+t)];case 1:return[2,"serialWrite successful"===e.sent().value]}})})},zt.prototype.read=function(t){return nt(this,void 0,Promise,function(){return it(this,function(e){switch(e.label){case 0:return[4,this.api.getData(wt.serialRead,"till="+t)];case 1:return[2,e.sent().value]}})})},zt.prototype.readWrite=function(t,r){return nt(this,void 0,void 0,function(){return it(this,function(e){switch(e.label){case 0:return[4,this.api.getData(wt.serialWR,"till="+r+"&data="+t)];case 1:return[2,e.sent().value]}})})},zt);function zt(e,t){var r=qt.call(this,e)||this;return r.showLoader=t,r.api=new xt(r.CurrentDevice,r.showLoader),r}var Vt,Kt,Xt=(rt(Yt,Vt=Ut),Yt.prototype.isOnline=function(){return nt(this,void 0,void 0,function(){return it(this,function(e){switch(e.label){case 0:return[4,this.api.getData(wt.isOnline)];case 1:return[2,e.sent().value===ht.online]}})})},Yt.prototype.restart=function(){return nt(this,void 0,void 0,function(){return it(this,function(e){switch(e.label){case 0:return[4,this.api.getData(wt.restart)];case 1:return[2,"Restarted"===e.sent().value]}})})},Yt.prototype.version=function(){return nt(this,void 0,void 0,function(){return it(this,function(e){switch(e.label){case 0:return[4,this.api.getData(wt.version)];case 1:return[2,e.sent().value]}})})},Yt);function Yt(e,t){var r=Vt.call(this,e)||this;return r.showLoader=t,r.api=new xt(r.CurrentDevice,r.showLoader),r}function Jt(){var e=Kt.call(this)||this;return e.eventListeners=new Lt,e}var $t,Qt=new(rt(Jt,Kt=jt),Jt.prototype.read=function(e,t){if(this.isDeviceAdded(e))return{Analog:new Wt(e,t),Digital:new Mt(e,t),UART:new Gt(e,t),Utility:new Xt(e,t)};var r="Device details are invalid";this.eventListeners.run(dt.message,vt.error,r),this.log(vt.error,r)},Jt.prototype.isDeviceAdded=function(t){return!!this.Devices.find(function(e){return e.name===t})},Jt.prototype.add=function(t,e){if(t&&e&&"string"==typeof t&&"string"==typeof e){if(!this.Devices.find(function(e){return e.name===t}))return this.Devices.push({key:e,name:t}),this.read(t);var r="Device "+t+" already added";return this.eventListeners.run(dt.message,vt.error,r),void this.log(vt.error,r)}var n="Device details are invalid";this.eventListeners.run(dt.message,vt.error,n),this.log(vt.error,n)},Jt.prototype.addAndRead=function(t,e){if(t&&e&&"string"==typeof t&&"string"==typeof e)return this.Devices.find(function(e){return e.name===t})||this.Devices.push({key:e,name:t}),this.read(t);var r="Device details are invalid";this.eventListeners.run(dt.message,vt.error,r),this.log(vt.error,r)},Jt);function Zt(){var e=null!==$t&&$t.apply(this,arguments)||this;return e.eventListener=new Lt,e}var er=new(rt(Zt,$t=jt),Zt.prototype.api=function(e){return this.eventListener.subscribe(dt.api,e)},Zt.prototype.message=function(e){return this.eventListener.subscribe(dt.message,e)},Zt);e.Analog=Wt,e.Devices=Qt,e.Digital=Mt,e.Enums=Ot,e.PubSub=er,e.UART=Gt,e.Utility=Xt,Object.defineProperty(e,"__esModule",{value:!0})});
